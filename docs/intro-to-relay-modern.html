<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Introduction to Relay Modern | Relay Docs</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Introduction to Relay Modern | Relay Docs"><meta property="og:type" content="website"><meta property="og:url" content="http://facebook.github.io/relay/index.html"><meta property="og:description" content="A JavaScript framework for building data-driven React applications"><link rel="shortcut icon" href="/relay/img/favicon.png"><link rel="stylesheet" href="/relay/css/relay.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="/relay/"><img class="nav-logo" src="/relay/img/logo.svg" width="50" height="50">Relay</a><ul class="nav-site"><li><a href="/relay/prototyping/playground.html" class="">Try it out</a></li><li><a href="/relay/docs/getting-started.html#content" class="active">Docs</a></li><li><a href="/relay/support.html" class="">Support</a></li><li><a href="https://github.com/facebook/relay" class="">GitHub</a></li></ul></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-section"><h3>Quick Start</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/getting-started.html#content">Getting Started</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/tutorial.html#content">Tutorial</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/thinking-in-graphql.html#content">Thinking in GraphQL</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/thinking-in-relay.html#content">Thinking In Relay</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/videos.html#content">Videos</a></li></ul></div><div class="nav-docs-section"><h3>Relay Modern</h3><ul><li><a style="margin-left:0;" class="active" href="/relay/docs/intro-to-relay-modern.html#content">Introduction to Relay Modern</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/new-in-relay-modern.html#content">New in Relay Modern</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/relay-environment.html#content">The Relay &quot;Environment&quot;</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/QueryRenderer.html#content">QueryRenderer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/FragmentContainer.html#content">FragmentContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/PaginationContainer.html#content">PaginationContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/RefetchContainer.html#content">RefetchContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/routing.html#content">Routing</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/mutations.html#content">Mutations</a></li></ul></div><div class="nav-docs-section"><h3>Converting to Modern</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/conversion-playbook.html#content">Conversion Playbook</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/conversion-scripts.html#content">Conversion Scripts</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/upgrading-setvariables.html#content">Upgrading setVariables</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/compatibility-cheatsheet.html#content">Compatibility Cheatsheet</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-cheatsheet.html#content">API Cheatsheet</a></li></ul></div><div class="nav-docs-section"><h3>Relay Classic Guides</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/guides-containers.html#content">Containers</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-routes.html#content">Routes</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-root-container.html#content">Root Container</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-ready-state.html#content">Ready State</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-mutations.html#content">Mutations</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-network-layer.html#content">Network Layer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/guides-babel-plugin.html#content">Babel Relay Plugin</a></li></ul></div><div class="nav-docs-section"><h3>GraphQL</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/graphql-relay-specification.html#content">GraphQL Relay Specification</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-object-identification.html#content">Object Identification</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-connections.html#content">Connection</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-mutations.html#content">Mutations</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/graphql-further-reading.html#content">Further Reading</a></li></ul></div><div class="nav-docs-section"><h3>Relay Classic API</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay.html#content">Relay</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-container.html#content">RelayContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-route.html#content">Relay.Route</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-renderer.html#content">Relay.Renderer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-root-container.html#content">Relay.RootContainer</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-ql.html#content">Relay.QL</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-mutation.html#content">Relay.Mutation</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-graphql-mutation.html#content">Relay.GraphQLMutation</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-proptypes.html#content">Relay.PropTypes</a></li><li><a style="margin-left:0;" class="" href="/relay/docs/api-reference-relay-store.html#content">Relay.Store</a></li></ul></div><div class="nav-docs-section"><h3>Relay Classic Interfaces</h3><ul><li><a style="margin-left:0;" class="" href="/relay/docs/interfaces-relay-network-layer.html#content">RelayNetworkLayer</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/interfaces-relay-mutation-request.html#content">RelayMutationRequest</a></li><li><a style="margin-left:20px;" class="" href="/relay/docs/interfaces-relay-query-request.html#content">RelayQueryRequest</a></li></ul></div></div><div class="inner-content"><a id="content"></a><a class="edit-page-link" href="https://github.com/facebook/relay/blob/master/docs/Introduction.md" target="_blank">Edit on GitHub</a><h1>Introduction to Relay Modern</h1><div><blockquote><p>A new JavaScript GraphQL client for building data-driven React applications.</p></blockquote><p><strong>NOTE:</strong> This document describes the updated and improved Relay API, Relay Modern. For documentation on the previous API, Relay Classic, see <a href="./getting-started.html" target="_blank">Getting Started</a>.</p><h2><a class="anchor" name="idea"></a>Idea <a class="hash-link" href="#idea">#</a></h2><p><a href="https://facebook.github.io/react/" target="_blank">React</a> allows views to be defined as components where every component is responsible for rendering a part of the UI. Composing other components is how to build complex UIs. Each React component doesn&#x27;t need to know the inner workings of the composed components.</p><p>Relay couples React with GraphQL and develops the idea of encapsulation further. It allows components to specify what data they need and the Relay framework provides the data. This makes the data needs of inner components opaque and allows composition of those needs. Thinking about what data an app needs becomes localized to the component making it easier to reason about what fields are needed or no longer needed.</p><h2><a class="anchor" name="terminology"></a>Terminology <a class="hash-link" href="#terminology">#</a></h2><h3><a class="anchor" name="container"></a>Container <a class="hash-link" href="#container">#</a></h3><p>Relay Modern containers take a usual React component (UI) and the collocated GraphQL queries (data requirements), and return a higher order React component. The basic container is the generic <a href="./FragmentContainer.html" target="_blank">fragment container</a>. Relay Modern also provides more advanced containers for dynamic use cases (which were previously handled in Relay Classic via <code>setVariables</code>):</p><h4><a class="anchor" name="container-see-more"></a>&quot;See More&quot; <a class="hash-link" href="#container-see-more">#</a></h4><p><a href="./RefetchContainer.html" target="_blank"><code>createRefetchContainer</code></a> addresses the &quot;see more&quot; use case, where you have an initial view that shows a subset of the available data, and you wish to fetch additional information — or re-issue the original query with some new variables — and then redisplay the component.</p><h4><a class="anchor" name="container-pagination"></a>Pagination <a class="hash-link" href="#container-pagination">#</a></h4><p>This is a specialization of the general-purpose refetch container that is tailored for the common scenario of paginating through a collection of items by fetching successively more pages of data. See <a href="./PaginationContainer.html" target="_blank"><code>createPaginationContainer</code></a> for details.</p><h3><a class="anchor" name="query-renderer"></a>Query Renderer <a class="hash-link" href="#query-renderer">#</a></h3><p><code>QueryRenderer</code> manages the execution of the GraphQL query. It sends the query with given parameters, parses the response, saves the data to the internal store, and finally renders the view. <a href="./QueryRenderer.html" target="_blank">More details</a>.</p><h3><a class="anchor" name="relay-environment"></a>Relay Environment <a class="hash-link" href="#relay-environment">#</a></h3><p>The Relay Environment is a self-contained environment with its own in-memory cache, and exports public APIs of Relay core. It can be accessed via <code>this.props.relay.environment</code>. Most of the time, you don&#x27;t need to interact with this lower level API, but you will need it <a href="./mutations.html" target="_blank">when doing a mutation</a>. For more details about the Environment, see <a href="./relay-environment.html" target="_blank">this page</a>.</p><h2><a class="anchor" name="workflow"></a>Workflow <a class="hash-link" href="#workflow">#</a></h2><p>One of the big ideas behind the new API is that execution can be made a lot more efficient by moving work ahead-of-time: from to runtime of the app to the build-time. As such, changes to GraphQL fragments require a build step to regenerate a set of artifacts. More on <a href="#" target="">the Relay Compiler</a>.</p><h2><a class="anchor" name="what-s-the-difference-between-relay-classic-and-relay-modern"></a>What&#x27;s the difference between Relay Classic and Relay Modern <a class="hash-link" href="#what-s-the-difference-between-relay-classic-and-relay-modern">#</a></h2><h3><a class="anchor" name="everything-is-static-and-persistable"></a>Everything is static and persistable <a class="hash-link" href="#everything-is-static-and-persistable">#</a></h3><p>The updated Relay engine uses only static GraphQL queries — that is, queries that can be known at build-time — and doesn&#x27;t do any dynamic query construction at runtime. Because the queries can be statically deftermined, they can also be persisted on the server ahead of time: this means that request size can be drastically reduced by sending an ID for a previously perisisted query rather than the full query text.</p><h3><a class="anchor" name="mutation-is-imperative"></a>Mutation is imperative <a class="hash-link" href="#mutation-is-imperative">#</a></h3><p>Mutation — performing updates to the data — is an intrinsically imperative, mutative operation. Relay Classic provides a declarative API for mutation and does the dirty work behind the scenes. However, the amount of &quot;magic&quot; involved made it confusing and hard to debug, especially for connection fields. Thus, in Relay Modern, we provide a set of imperative APIs and let the engineers take full control over the data. Check out the <a href="#" target="">Optimistic Updates</a> section and see how it works.</p><h3><a class="anchor" name="built-in-flow-support"></a>Built in Flow support <a class="hash-link" href="#built-in-flow-support">#</a></h3><p>The build step for the new API automatically creates (optional) <a href="https://flow.org/" target="_blank">Flow</a> types for the structure of the props enabling auto-completion in Flow-aware tools and type-safety checks.</p></div><div class="docs-prevnext"><a class="docs-next" href="new-in-relay-modern.html#content">Next →</a></div></div></section><footer class="wrap"><div class="right">©2017 Facebook Inc.</div></footer></div><div id="fb-root"></div><script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-71174216-1', 'auto');
              ga('send', 'pageview');
          </script></body></html>